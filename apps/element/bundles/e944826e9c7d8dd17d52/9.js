(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{323:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return a}));var o=n(93);function r(){return{selection:{anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0}}}const c=Object(o.createContext)({selection:{anchorNode:null,anchorOffset:0,focusNode:null,focusOffset:0}});function a(){return Object(o.useContext)(c)}c.displayName="ComposerContext"},453:function(e,t,n){"use strict";function o(e){if(e.anchorNode&&e.focusNode){var t,n;const o=new Range;o.setStart(e.anchorNode,e.anchorOffset),o.setEnd(e.focusNode,e.focusOffset),null===(t=document.getSelection())||void 0===t||t.removeAllRanges(),null===(n=document.getSelection())||void 0===n||n.addRange(o)}return new Promise((e=>setTimeout(e,0)))}function r(){const e=document.getSelection();return Boolean(null==e?void 0:e.isCollapsed)}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return r}))},621:function(e,t,n){"use strict";function o(e,t,n,o){var r;t===n.timelineRenderingType&&(null===(r=e.current)||void 0===r||r.focus(),o.current&&clearTimeout(o.current),o.current=window.setTimeout((()=>{var t;return null===(t=e.current)||void 0===t?void 0:t.focus()}),200))}function r(e){const t=document.createRange();t.selectNodeContents(e),t.collapse(!1);const n=document.getSelection();n.removeAllRanges(),n.addRange(t),e.focus()}n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}))},908:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(93),r=n(621);function c(e,t){Object(o.useEffect)((()=>{t.current&&!e&&Object(r.b)(t.current)}),[t,e])}},909:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(93);function r(){const[e,t]=Object(o.useState)(!1),n=Object(o.useRef)();Object(o.useEffect)((()=>()=>clearTimeout(n.current)),[n]);return{isFocused:e,onFocus:Object(o.useCallback)((e=>{clearTimeout(n.current),"focus"===e.type?t(!0):n.current=window.setTimeout((()=>t(!1)),100)}),[t,n])}}},917:function(e,t,n){"use strict";n.d(t,"a",(function(){return G}));var o,r=n(93),c=n.n(r),a=n(622),i=n(99),l=n.n(i);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s.apply(this,arguments)}function u(e){return r.createElement("svg",s({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),o||(o=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 3a1 1 0 011-1h3.192C10.093 2 11.5 3.644 11.5 5.5c0 .753-.232 1.472-.634 2.06A3.471 3.471 0 0112.5 10.5c0 1.96-1.626 3.5-3.571 3.5H5a1 1 0 01-1-1V3zm2 1v3h2.192C8.841 7 9.5 6.405 9.5 5.5S8.84 4 8.192 4H6zm0 5v3h2.929c.894 0 1.571-.698 1.571-1.5S9.823 9 8.929 9H6z",fill:"currentColor"})))}var m;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d.apply(this,arguments)}function f(e){return r.createElement("svg",d({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),m||(m=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.086 3.6l-1.805 8.804H4.8a.8.8 0 000 1.6H9.067a.8.8 0 100-1.6H7.914L9.719 3.6H11.2a.8.8 0 000-1.6H9.082a.8.8 0 00-.032 0H6.933a.8.8 0 100 1.6h1.153z",fill:"currentColor"})))}var b;function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p.apply(this,arguments)}function v(e){return r.createElement("svg",p({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),b||(b=r.createElement("path",{d:"M8.193 11.3c2.02-.26 3.474-2.073 3.474-4.107v-4.36a.834.834 0 00-1.667 0v4.434c0 1.113-.753 2.126-1.847 2.346a2.33 2.33 0 01-2.82-2.28v-4.5a.834.834 0 00-1.666 0v4.5c0 2.38 2.086 4.28 4.526 3.967zM3 13.333c0 .367.3.667.667.667h8c.366 0 .666-.3.666-.667 0-.366-.3-.666-.666-.666h-8c-.367 0-.667.3-.667.666z",fill:"currentColor"})))}var O;function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g.apply(this,arguments)}function h(e){return r.createElement("svg",g({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),O||(O=r.createElement("path",{d:"M9.932 4.77C9.49 3.88 8.584 3.474 7.582 3.58c-1.549.167-1.956 1.367-1.767 2.147.206.853.883 1.185 2.078 1.49h5.387c.398 0 .72.35.72.782 0 .432-.322.782-.72.782H2.72C2.322 8.782 2 8.432 2 8c0-.432.322-.783.72-.783h2.183a3.184 3.184 0 01-.48-1.091c-.42-1.738.613-3.843 3.017-4.102 1.416-.153 2.97.416 3.758 2.001.19.38.06.855-.29 1.06-.35.206-.787.065-.976-.315zM10.285 10.087h1.495c.145.784.034 1.62-.413 2.334C10.742 13.417 9.58 14 7.99 14c-2.606 0-3.804-1.61-4.048-2.676-.097-.42.138-.844.524-.949.385-.105.776.15.873.57.074.323.662 1.49 2.65 1.49 1.282 0 1.914-.459 2.187-.895.252-.402.296-.934.109-1.453z",fill:"currentColor"})))}var y;function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},j.apply(this,arguments)}function w(e){return r.createElement("svg",j({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),y||(y=r.createElement("path",{d:"M9.972 3.749a.667.667 0 10-1.277-.383l-2.667 8.889a.667.667 0 101.277.383l2.667-8.889zM3.982 4.823a.667.667 0 00-.939.086L.821 7.575a.667.667 0 000 .854l2.222 2.666a.667.667 0 101.025-.853L2.2 8.002l1.867-2.24a.667.667 0 00-.086-.939zM12.018 4.823a.667.667 0 01.939.086l2.222 2.666a.666.666 0 010 .854l-2.222 2.666a.667.667 0 11-1.025-.853l1.867-2.24-1.867-2.24a.667.667 0 01.086-.939z",fill:"currentColor"})))}var C;function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},E.apply(this,arguments)}function k(e){return r.createElement("svg",E({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",role:"presentation","aria-hidden":!0},e),C||(C=r.createElement("path",{d:"M8.378 4.1l.356-.356c.984-.984 2.57-.993 3.543-.02.972.972.963 2.558-.021 3.542l-1.693 1.693c-.984.984-2.57.993-3.543.021m.603 2.92l-.357.356c-.984.984-2.57.993-3.543.02-.972-.972-.963-2.558.021-3.542l1.693-1.693c.984-.984 2.57-.993 3.543-.02",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round"})))}var x=n(120),_=n(137),N=n(618),B=n(94),S=n(6),P=n.n(S),F=n(100),T=n(111),M=n(453),R=n(108),L=n(117);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){return e.length<1}function A(e){let{composer:t,isTextEnabled:n,onClose:o,composerContext:a,isEditing:i}=e;const[l,s]=Object(r.useState)(!1),[u,m]=Object(r.useState)({text:"",link:i?t.getLink():""}),d=!i&&n,f=!l||d&&I(u.text)||I(u.link);return c.a.createElement(R.a,{className:"mx_LinkModal",title:i?Object(B.a)("Edit link"):Object(B.a)("Create a link"),hasCancel:!0,onFinished:o},c.a.createElement("form",{className:"mx_LinkModal_content",onSubmit:async e=>{e.preventDefault(),e.stopPropagation(),o(),await new Promise((e=>setTimeout(e,0))),await Object(M.b)(a.selection),t.link(u.link,n?u.text:void 0)}},d&&c.a.createElement(T.a,{required:!0,autoFocus:!0,label:Object(B.a)("Text"),value:u.text,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>m((t=>D(D({},t),{},{text:e.target.value})))}),c.a.createElement(T.a,{required:!0,autoFocus:!d,label:Object(B.a)("Link"),value:u.link,className:"mx_LinkModal_Field",placeholder:"",onChange:e=>{m((t=>D(D({},t),{},{link:e.target.value}))),s(!0)}}),c.a.createElement("div",{className:"mx_LinkModal_buttons"},i&&c.a.createElement("button",{type:"button",className:"danger",onClick:()=>{t.removeLinks(),o()}},Object(B.a)("Remove")),c.a.createElement(L.a,{primaryButton:Object(B.a)("Save"),primaryDisabled:f,primaryIsSubmit:!0,onCancel:o}))))}var H=n(323);function W(e){let{label:t,keyCombo:n}=e;return c.a.createElement("div",{className:"mx_FormattingButtons_Tooltip"},t,n&&c.a.createElement(N.a,{value:n,className:"mx_FormattingButtons_Tooltip_KeyboardShortcut"}))}function K(e){let{label:t,keyCombo:n,onClick:o,isActive:r,icon:a}=e;return c.a.createElement(x.a,{element:"button",onClick:o,title:t,className:l()("mx_FormattingButtons_Button",{mx_FormattingButtons_active:r,mx_FormattingButtons_Button_hover:!r}),tooltip:n&&c.a.createElement(W,{label:t,keyCombo:n}),alignment:_.a.Top},a)}function q(e){let{composer:t,actionStates:n}=e;const o=Object(H.c)();return c.a.createElement("div",{className:"mx_FormattingButtons"},c.a.createElement(K,{isActive:"reversed"===n.bold,label:Object(B.c)("Bold"),keyCombo:{ctrlOrCmdKey:!0,key:"b"},onClick:()=>t.bold(),icon:c.a.createElement(u,{className:"mx_FormattingButtons_Icon"})}),c.a.createElement(K,{isActive:"reversed"===n.italic,label:Object(B.c)("Italic"),keyCombo:{ctrlOrCmdKey:!0,key:"i"},onClick:()=>t.italic(),icon:c.a.createElement(f,{className:"mx_FormattingButtons_Icon"})}),c.a.createElement(K,{isActive:"reversed"===n.underline,label:Object(B.c)("Underline"),keyCombo:{ctrlOrCmdKey:!0,key:"u"},onClick:()=>t.underline(),icon:c.a.createElement(v,{className:"mx_FormattingButtons_Icon"})}),c.a.createElement(K,{isActive:"reversed"===n.strikeThrough,label:Object(B.c)("Strikethrough"),onClick:()=>t.strikeThrough(),icon:c.a.createElement(h,{className:"mx_FormattingButtons_Icon"})}),c.a.createElement(K,{isActive:"reversed"===n.inlineCode,label:Object(B.c)("Code"),keyCombo:{ctrlOrCmdKey:!0,key:"e"},onClick:()=>t.inlineCode(),icon:c.a.createElement(w,{className:"mx_FormattingButtons_Icon"})}),c.a.createElement(K,{isActive:"reversed"===n.link,label:Object(B.c)("Link"),onClick:()=>function(e,t,n){const o=F.b.createDialog(A,{composerContext:t,composer:e,onClose:()=>o.close(),isTextEnabled:Object(M.a)(),isEditing:n},"mx_CompoundDialog",!1,!0)}(t,o,"reversed"===n.link),icon:c.a.createElement(k,{className:"mx_FormattingButtons_Icon"})}))}var J=n(925),$=n(141);var U=n(908),V=n(909);const G=Object(r.memo)((function(e){let{disabled:t=!1,onChange:n,onSend:o,placeholder:i,initialContent:s,className:u,leftComponent:m,rightComponent:d,children:f}=e;const b=function(e){const t=Object($.b)("MessageComposerInput.ctrlEnterToSend");return Object(r.useCallback)((n=>n instanceof ClipboardEvent?n:"insertParagraph"===n.inputType&&!t||"sendMessage"===n.inputType?(e(),null):n),[t,e])}(o),{ref:p,isWysiwygReady:v,content:O,actionStates:g,wysiwyg:h}=Object(a.useWysiwyg)({initialContent:s,inputEventProcessor:b});Object(r.useEffect)((()=>{t||null===O||null==n||n(O)}),[n,O,t]);const y=v&&!t;Object(U.a)(!y,p);const{isFocused:j,onFocus:w}=Object(V.a)(),C=!O&&i||void 0;return c.a.createElement("div",{"data-testid":"WysiwygComposer",className:l()(u,{[`${u}-focused`]:j}),onFocus:w,onBlur:w},c.a.createElement(q,{composer:h,actionStates:g}),c.a.createElement(J.a,{ref:p,disabled:!y,leftComponent:m,rightComponent:d,placeholder:C}),null==f?void 0:f(p,h))}))},925:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o=n(99),r=n.n(o),c=n(93),a=n.n(c);var i=n(6),l=n.n(i),s=n(540),u=n(323);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){const t=document.getSelection();t&&(e.selection={anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset})}const b=Object(c.memo)(Object(c.forwardRef)((function(e,t){let{disabled:n,placeholder:o,leftComponent:i,rightComponent:l}=e;const m=function(e,t){const[n,o]=Object(c.useState)(!1);return Object(c.useEffect)((()=>{if(e.current){const n=e.current,r=new ResizeObserver((e=>{requestAnimationFrame((()=>{var n,r;const c=null===(n=e[0])||void 0===n||null===(r=n.contentBoxSize)||void 0===r?void 0:r[0].blockSize;o(c>=t)}))}));return r.observe(n),()=>r.unobserve(n)}}),[e,t]),n}(t,20),{onFocus:b,onBlur:p,onInput:v}=function(){const e=Object(u.c)(),[t,n]=Object(s.a)();Object(c.useEffect)((()=>{function n(){f(e)}return t&&document.addEventListener("selectionchange",n),()=>document.removeEventListener("selectionchange",n)}),[t,e]);const o=Object(c.useCallback)((()=>{f(e)}),[e]);return d(d({},n),{},{onInput:o})}();return a.a.createElement("div",{"data-testid":"WysiwygComposerEditor",className:"mx_WysiwygComposer_Editor","data-is-expanded":m},i,a.a.createElement("div",{className:"mx_WysiwygComposer_Editor_container"},a.a.createElement("div",{className:r()("mx_WysiwygComposer_Editor_content",{mx_WysiwygComposer_Editor_content_placeholder:Boolean(o)}),style:{"--placeholder":`"${o}"`},ref:t,contentEditable:!n,role:"textbox","aria-multiline":"true","aria-autocomplete":"list","aria-haspopup":"listbox",dir:"auto","aria-disabled":n,onFocus:b,onBlur:p,onInput:v})),l)})))}}]);
//# sourceMappingURL=9.js.map