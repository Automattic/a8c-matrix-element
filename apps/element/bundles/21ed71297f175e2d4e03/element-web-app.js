(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1279:function(e,t){},1342:function(e,t,n){var r={"./":[226,9],"./ICanvasEffect":[772,7,8],"./ICanvasEffect.ts":[772,7,8],"./confetti":[394,9,0],"./confetti/":[394,9,0],"./confetti/index":[394,9,0],"./confetti/index.ts":[394,9,0],"./effect":[773,9,9],"./effect.ts":[773,9,9],"./fireworks":[395,9,1],"./fireworks/":[395,9,1],"./fireworks/index":[395,9,1],"./fireworks/index.ts":[395,9,1],"./hearts":[396,9,2],"./hearts/":[396,9,2],"./hearts/index":[396,9,2],"./hearts/index.ts":[396,9,2],"./index":[226,9],"./index.ts":[226,9],"./rainfall":[397,9,3],"./rainfall/":[397,9,3],"./rainfall/index":[397,9,3],"./rainfall/index.ts":[397,9,3],"./snowfall":[398,9,4],"./snowfall/":[398,9,4],"./snowfall/index":[398,9,4],"./snowfall/index.ts":[398,9,4],"./spaceinvaders":[399,9,5],"./spaceinvaders/":[399,9,5],"./spaceinvaders/index":[399,9,5],"./spaceinvaders/index.ts":[399,9,5],"./utils":[325,9],"./utils.ts":[325,9]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(a,t[1])}))}a.keys=function(){return Object.keys(r)},a.id=1342,e.exports=a},1349:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(87),a=n.n(r),o=n(97);class i extends a.a.PureComponent{render(){var e;const t=o.b.getObject("branding"),n=null!==(e=null==t?void 0:t.get("auth_header_logo_url"))&&void 0!==e?e:"themes/element/img/logos/element-logo.svg";return a.a.createElement("div",{className:"mx_AuthHeaderLogo"},a.a.createElement("img",{src:n,alt:"Element"}))}}},1384:function(e,t,n){"use strict";n.r(t),n.d(t,"loadApp",(function(){return p}));n(1268);var r=n(87),a=n.n(r),o=n(125),i=n(88),l=n(292),s=n(269),c=n(388),d=n(97),u=n(1),g=n(122),f=n(9),m=n(1291),w=n(26),h=n(733);function v(e){let t;t="vector:"===window.location.protocol?"https://app.element.io/#/register":window.location.protocol+"//"+window.location.host+window.location.pathname+"#/register";const n=Object.keys(e);for(let r=0;r<n.length;++r){t+=0===r?"?":"&";const a=n[r];t+=a+"="+encodeURIComponent(e[a])}return t}function _(){const e=new URL(window.location.href);e.searchParams.delete("loginToken"),u.a.log(`Redirecting to ${e.href} to drop loginToken from queryparams`),window.history.replaceState(null,"",e.href)}async function p(e){var t;Object(h.b)();const n=o.a.get(),r=Object(w.a)(window.location),p=window.location.protocol+"//"+window.location.host+window.location.pathname;u.a.log("Vector starting at "+p),n.startUpdater();const b=await async function(){let e;try{u.a.log("Verifying homeserver configuration");const t=d.b.get();let n=t.default_server_config;const r=t.default_server_name,a=t.default_hs_url,o=t.default_is_url,c=[n,r,a].filter(e=>!!e);if(c.length>1)throw Object(i.i)(Object(i.c)("Invalid configuration: can only specify one of default_server_config, default_server_name, or default_hs_url."));if(c.length<1)throw Object(i.i)(Object(i.c)("Invalid configuration: no default server specified."));a&&(u.a.log("Config uses a default_hs_url - constructing a default_server_config using this information"),u.a.warn("DEPRECATED CONFIG OPTION: In the future, default_hs_url will not be accepted. Please use default_server_config instead."),n={"m.homeserver":{base_url:a}},o&&(n["m.identity_server"]={base_url:o}));let g=null;n&&(u.a.log("Config uses a default_server_config - validating object"),g=await s.a.fromDiscoveryConfig(n)),r&&(u.a.log("Config uses a default_server_name - doing .well-known lookup"),u.a.warn("DEPRECATED CONFIG OPTION: In the future, default_server_name will not be accepted. Please use default_server_config instead."),g=await s.a.findClientConfig(r)),e=l.a.buildValidatedConfigFromDiscovery(r,g,!0)}catch(t){const{hsUrl:n,isUrl:r,userId:a}=await c.c();if(!n||!a)throw t;u.a.error(t),u.a.warn("A session was found - suppressing config error and using the session's homeserver"),u.a.log("Using pre-existing hsUrl and isUrl: ",{hsUrl:n,isUrl:r}),e=await l.a.validateServerConfigWithStaticUrls(n,r,!0)}return e.isDefault=!0,u.a.log("Using homeserver config:",e),u.a.log("Updating SdkConfig with validated discovery information"),d.b.add({validated_server_config:e}),d.b.get()}(),k=new f.a(b),[x]=await c.b(),y=!!x,U=!!r.loginToken,O=Object(d.c)(b);let C=!0===O.immediate;const E="#/welcome"===window.location.hash||"#"===window.location.hash;if(!C&&O.on_welcome_page&&E&&(C=!0),!y&&!U&&C){u.a.log("Bypassing app load to redirect to SSO");const e=Object(g.createClient)({baseUrl:b.validated_server_config.hsUrl,idBaseUrl:b.validated_server_config.isUrl});return void o.a.get().startSingleSignOn(e,"sso","/"+Object(h.a)(window.location).screen)}const j=null!==(t=k.get("default_device_display_name"))&&void 0!==t?t:n.getDefaultDeviceDisplayName();return a.a.createElement(m.a,{onNewScreen:h.c,makeRegistrationUrl:v,config:b,realQueryParams:r,startingFragmentQueryParams:e,enableGuest:!b.disable_guests,onTokenLoginCompleted:_,initialScreenAfterLogin:Object(h.a)(window.location),defaultDeviceDisplayName:j})}window.React=a.a,u.a.log("Application is running in production mode"),window.matrixLogger=u.a},259:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(17),a=n.n(r),o=n(87),i=n.n(o),l=n(97),s=n(88);var c=()=>{var e;const t=l.b.getObject("branding"),n=null!==(e=null==t?void 0:t.get("auth_footer_links"))&&void 0!==e?e:[{text:"Blog",url:"https://element.io/blog"},{text:"Twitter",url:"https://twitter.com/element_hq"},{text:"GitHub",url:"https://github.com/vector-im/element-web"}],r=[];for(const e of n)r.push(i.a.createElement("a",{href:e.url,key:e.text,target:"_blank",rel:"noreferrer noopener"},e.text));return i.a.createElement("div",{className:"mx_AuthFooter"},r,i.a.createElement("a",{href:"https://matrix.org",target:"_blank",rel:"noreferrer noopener"},Object(s.a)("Powered by Matrix")))};class d extends i.a.PureComponent{static getWelcomeBackgroundUrl(){if(d.welcomeBackgroundUrl)return d.welcomeBackgroundUrl;const e=l.b.getObject("branding");d.welcomeBackgroundUrl="themes/element/img/backgrounds/lake.jpg";const t=null==e?void 0:e.get("welcome_background_url");if(t)if(Array.isArray(t)){const e=Math.floor(Math.random()*t.length);d.welcomeBackgroundUrl=t[e]}else d.welcomeBackgroundUrl=t;return d.welcomeBackgroundUrl}render(){const e={background:`center/cover fixed url(${d.getWelcomeBackgroundUrl()})`},t={position:"absolute",top:0,right:0,bottom:0,left:0,filter:"blur(40px)",background:e.background};return i.a.createElement("div",{className:"mx_AuthPage",style:e},i.a.createElement("div",{className:"mx_AuthPage_modal",style:{position:"relative",background:"initial"}},i.a.createElement("div",{className:"mx_AuthPage_modalBlur",style:t}),i.a.createElement("div",{className:"mx_AuthPage_modalContent",style:{display:"flex",zIndex:1,background:"rgba(255, 255, 255, 0.59)",borderRadius:"8px"}},this.props.children)),i.a.createElement(c,null))}}a()(d,"welcomeBackgroundUrl",void 0)}}]);
//# sourceMappingURL=element-web-app.js.map