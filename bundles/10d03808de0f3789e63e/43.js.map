{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useSuggestion.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/usePlainTextListeners.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/PlainTextComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useComposerFunctions.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/usePlainTextInitialization.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/Emoji.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/SendWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygSendActionHandler.ts"],"names":["useSuggestion","editorRef","setText","_suggestionData$mappe","suggestionData","setSuggestionData","useState","suggestion","mappedSuggestion","handleCommand","replacementText","_document$getSelectio2","node","newContent","textContent","document","getSelection","setBaseAndExtent","length","processCommand","handleMention","href","displayName","attributes","_node$textContent","_node$textContent$sli","_node$textContent2","_document$getSelectio","linkElement","createElement","linkTextNode","createTextNode","setAttribute","Object","entries","forEach","_ref","attr","value","isNotUndefined","appendChild","leadingTextNode","slice","startOffset","trailingTextNode","endOffset","parentNode","isNotNull","insertBefore","removeChild","processMention","onSelect","_selection$anchorNode","selection","current","isCollapsed","anchorNode","nodeName","currentNode","anchorOffset","currentOffset","firstTextNode","createNodeIterator","NodeFilter","SHOW_TEXT","nextNode","isFirstTextNode","foundSuggestion","text","offset","startSliceIndex","endSliceIndex","shouldDecrementStartIndex","shouldIncrementEndIndex","wordAtCursor","firstChar","charAt","restOfString","keyChar","type","getMappedSuggestion","findSuggestionInText","processSelectionChange","index","test","usePlainTextListeners","initialContent","onChange","onSend","ref","useRef","autocompleteRef","content","setContent","send","useCallback","innerHTML","currentRefContent","enterShouldSend","useSettingValue","onInput","event","target","HTMLDivElement","newInnerHTML","replace","onKeyDown","handleEventWithAutocomplete","key","Key","ENTER","sendModifierIsPressed","IS_MAC","metaKey","ctrlKey","shiftKey","preventDefault","stopPropagation","onPaste","PlainTextComposer","className","disabled","children","placeholder","leftComponent","rightComponent","composerFunctions","useMemo","clear","insertText","focusOffset","setSelection","firstChild","focusNode","isForward","useComposerFunctions","arguments","undefined","useEffect","innerText","usePlainTextInitialization","useSetCursorPosition","isFocused","onFocus","useIsFocused","computedPlaceholder","React","classNames","onBlur","WysiwygAutocomplete","Editor","Emoji","menuPosition","roomContext","useRoomContext","EmojiButton","addEmoji","emoji","dis","dispatch","action","Action","ComposerInsert","timelineRenderingType","Content","forwardRef","composerElement","composerContext","useComposerContext","timeoutId","handler","payload","_payload$context","context","TimelineRenderingType","Room","FocusAComposer","FocusSendMessageComposer","focusComposer","ClearAndFocusSendMessageComposer","composerType","ComposerType","Send","userId","then","useDispatcher","defaultDispatcher","useWysiwygSendActionHandler","SendWysiwygComposer","_ref2","isRichTextEnabled","e2eStatus","eventRelation","props","_objectWithoutProperties","_excluded","Composer","WysiwygComposer","defaultContextValue","getDefaultContextValue","ComposerContext","Provider","_extends","E2EIcon","status"],"mappings":"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","file":"bundles/10d03808de0f3789e63e/43.js","sourceRoot":""}