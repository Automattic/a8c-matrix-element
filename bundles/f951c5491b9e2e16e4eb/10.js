(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{225:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(6),o=a.n(n),i=a(205),r=a(122),s=a(123),l=a(102),c=a(175),m=a(97),u=a(95),d=a(94),h=a(135);const p="mx_profile_displayname",b="mx_profile_avatar_url";class g extends c.a{constructor(){super(m.a,{displayName:window.localStorage.getItem(p),avatarUrl:window.localStorage.getItem(b)}),o()(this,"monitoredUser",void 0),o()(this,"onProfileUpdate",Object(s.throttle)((async()=>{const e=await this.matrixClient.getProfileInfo(this.matrixClient.getUserId());e.displayname?window.localStorage.setItem(p,e.displayname):window.localStorage.removeItem(p),e.avatar_url?window.localStorage.setItem(b,e.avatar_url):window.localStorage.removeItem(b),await this.updateState({displayName:e.displayname,avatarUrl:e.avatar_url,fetchedAt:Date.now()})}),200,{trailing:!0,leading:!0})),o()(this,"onStateEvents",(async e=>{const t=u.a.get().getUserId();e.getType()===l.b.RoomMember&&e.getSender()===t&&e.getStateKey()===t&&await this.onProfileUpdate()}))}static get instance(){return g.internalInstance}get displayName(){return this.matrixClient?this.matrixClient.isGuest()?Object(d.a)("Guest"):this.state.displayName?this.state.displayName:this.matrixClient.getUserId():this.state.displayName||null}get isProfileInfoFetched(){return!!this.state.fetchedAt}get avatarMxc(){return this.state.avatarUrl||null}getHttpAvatarUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.avatarMxc)return null;const t=Object(h.b)(this.avatarMxc);return!e||e<=0?t.srcHttp:t.getSquareThumbnailHttp(e)}async onNotReady(){var e;this.monitoredUser&&(this.monitoredUser.removeListener(i.b.DisplayName,this.onProfileUpdate),this.monitoredUser.removeListener(i.b.AvatarUrl,this.onProfileUpdate)),null===(e=this.matrixClient)||void 0===e||e.removeListener(r.b.Events,this.onStateEvents),await this.reset({})}async onReady(){const e=this.matrixClient.getUserId();this.monitoredUser=this.matrixClient.getUser(e),this.monitoredUser&&(this.monitoredUser.on(i.b.DisplayName,this.onProfileUpdate),this.monitoredUser.on(i.b.AvatarUrl,this.onProfileUpdate)),this.matrixClient.on(r.b.Events,this.onStateEvents),await this.onProfileUpdate()}async onAction(e){}}o()(g,"internalInstance",(()=>{const e=new g;return e.start(),e})())},616:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(103),o=a.n(n),i=a(106),r=a.n(i),s=a(93),l=a.n(s),c=a(99),m=a.n(c),u=a(120),d=a(626),h=a(146);const p=["title","children","className","iconClassName"],b=e=>{let{title:t,children:a,className:n,iconClassName:i}=e,c=r()(e,p);return!!Object(s.useContext)(d.a)?l.a.createElement(h.b,o()({},c,{iconClassName:i,label:t})):l.a.createElement(u.a,o()({},c,{title:t,className:m()(n,i)}),a)}},618:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(93),o=a.n(n),i=a(115),r=a(178),s=a(94);const l=e=>{let{name:t,last:a}=e;const n=i.g[t],r=i.a[t];return o.a.createElement(o.a.Fragment,null,o.a.createElement("kbd",null," ",n||r&&Object(s.a)(r)||t," "),!a&&"+")},c=e=>{let{value:t,className:a="mx_KeyboardShortcut"}=e;if(!t)return null;const n=[];return t.ctrlOrCmdKey?n.push(o.a.createElement(l,{key:"ctrlOrCmdKey",name:r.a?r.b.META:r.b.CONTROL})):t.ctrlKey?n.push(o.a.createElement(l,{key:"ctrlKey",name:r.b.CONTROL})):t.metaKey&&n.push(o.a.createElement(l,{key:"metaKey",name:r.b.META})),t.altKey&&n.push(o.a.createElement(l,{key:"altKey",name:r.b.ALT})),t.shiftKey&&n.push(o.a.createElement(l,{key:"shiftKey",name:r.b.SHIFT})),o.a.createElement("div",{className:a},n,o.a.createElement(l,{name:t.key,last:!0}))}},626:function(e,t,a){"use strict";a.d(t,"a",(function(){return je}));var n=a(6),o=a.n(n),i=a(103),r=a.n(i),s=a(99),l=a.n(s),c=a(152),m=a(93),u=a.n(m),d=a(136),h=a(94),p=a(120),b=a(616),g=a(97),v=a(118),y=a(121),_=a(105),C=a(511),E=a.n(C),k=a(1),f=a(119),O=a(100),x=a(104),j=a(217),M=a(244),w=a(204),N=a(96),S=a(592),L=a(139),P=a(256);const T={fifteenMins:9e5,oneHour:36e5,eightHours:288e5},U=T.fifteenMins,B=e=>Object(h.a)("Share for %(duration)s",{duration:Object(L.b)(e)});var I=e=>{let{timeout:t,onChange:a}=e;const n=Object.values(T).map((e=>({key:e.toString(),duration:e,label:B(e)})));Object.values(T).includes(t)||n.push({key:t.toString(),duration:t,label:B(t)});return u.a.createElement(P.a,{id:"live-duration","data-test-id":"live-duration-dropdown",label:B(t),value:t.toString(),onOptionChange:e=>{a(+e)},className:"mx_LiveDurationDropdown"},n.map((e=>{let{key:t,label:a}=e;return u.a.createElement("div",{"data-test-id":`live-duration-option-${t}`,key:t},a)})))},R=a(245),D=a(18),F=a(126),A=a(317),K=a(246);let G;!function(e){e.Own="Own",e.Pin="Pin",e.Live="Live"}(G||(G={}));const H=(e,t,a)=>{const{modalParams:n,errorMessage:o}="M_FORBIDDEN"===e.errcode?(e=>{const t=e===G.Live?"Insufficient permissions to start sharing your live location":"Insufficient permissions to send your location";return{modalParams:{title:Object(h.a)("You don't have permission to share locations"),description:Object(h.a)("You need to have the right permissions in order to share locations in this room."),button:Object(h.a)("OK"),hasCancelButton:!1,onFinished:()=>{}},errorMessage:t}})(a):((e,t)=>{const a=e===G.Live?"We couldn't start sharing your live location":"We couldn't send your location";return{modalParams:{title:Object(h.a)("We couldn't send your location"),description:Object(h.a)("%(brand)s could not send your location. Please try again later.",{brand:x.b.get().brand}),button:Object(h.a)("Try again"),cancelButton:Object(h.a)("Cancel"),onFinished:e=>{e&&t()}},errorMessage:a}})(a,t);k.a.error(o,e),O.b.createDialog(F.a,n)};var W=a(837);const V=e=>e===G.Own||e===G.Live;class q extends u.a.Component{constructor(e){super(e),o()(this,"context",void 0),o()(this,"map",null),o()(this,"geolocate",null),o()(this,"marker",null),o()(this,"getMarkerId",(()=>"mx_MLocationPicker_marker")),o()(this,"addMarkerToMap",(()=>{var e;this.marker=new E.a.Marker({element:null!==(e=document.getElementById(this.getMarkerId()))&&void 0!==e?e:void 0,anchor:"bottom",offset:[0,-1]}).setLngLat(new E.a.LngLat(0,0)).addTo(this.map)})),o()(this,"updateStyleUrl",(e=>{var t;const a=null===(t=Object(j.h)(e))||void 0===t?void 0:t.map_style_url;var n;a&&(null===(n=this.map)||void 0===n||n.setStyle(a))})),o()(this,"onGeolocate",(e=>{var t;this.marker||this.addMarkerToMap(),this.setState({position:Object(M.b)(e)}),null===(t=this.marker)||void 0===t||t.setLngLat(new E.a.LngLat(e.coords.longitude,e.coords.latitude))})),o()(this,"onClick",(e=>{var t;this.marker||this.addMarkerToMap(),null===(t=this.marker)||void 0===t||t.setLngLat(e.lngLat),this.setState({position:{timestamp:Date.now(),latitude:e.lngLat.lat,longitude:e.lngLat.lng}})})),o()(this,"onGeolocateError",(e=>{var t;(k.a.error("Could not fetch location",e),V(this.props.shareType)&&(this.props.onFinished(),O.b.createDialog(v.a,{title:Object(h.a)("Could not fetch location"),description:$(e.code)})),this.geolocate)&&(null===(t=this.map)||void 0===t||t.removeControl(this.geolocate))})),o()(this,"onTimeoutChange",(e=>{this.setState({timeout:e})})),o()(this,"onOk",(()=>{const{timeout:e,position:t}=this.state;this.props.onChoose(t?{uri:Object(M.f)(t),timestamp:t.timestamp,timeout:e}:{timeout:e}),this.props.onFinished()})),this.state={position:void 0,timeout:U,error:void 0}}componentDidMount(){this.context.on(f.b.ClientWellKnown,this.updateStyleUrl);try{if(this.map=new E.a.Map({container:"mx_LocationPicker_map",style:Object(w.d)(),center:[0,0],zoom:1}),this.geolocate=new E.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!1}),this.map.addControl(this.geolocate),this.map.on("error",(e=>{k.a.error("Failed to load map: check map_style_url in config.json has a valid URL and API key",e.error),this.setState({error:w.a.MapStyleUrlNotReachable})})),this.map.on("load",(()=>{this.geolocate.trigger()})),this.geolocate.on("error",this.onGeolocateError),V(this.props.shareType)&&this.geolocate.on("geolocate",this.onGeolocate),this.props.shareType===G.Pin){const e=new E.a.NavigationControl({showCompass:!1,showZoom:!0});this.map.addControl(e,"bottom-right"),this.map.on("click",this.onClick)}}catch(e){k.a.error("Failed to render map",e);const t=(null==e?void 0:e.message)===w.a.MapStyleUrlNotConfigured?w.a.MapStyleUrlNotConfigured:w.a.Default;this.setState({error:t})}}componentWillUnmount(){var e,t,a;null===(e=this.geolocate)||void 0===e||e.off("error",this.onGeolocateError),null===(t=this.geolocate)||void 0===t||t.off("geolocate",this.onGeolocate),null===(a=this.map)||void 0===a||a.off("click",this.onClick),this.context.off(f.b.ClientWellKnown,this.updateStyleUrl)}render(){return this.state.error?u.a.createElement("div",{className:"mx_LocationPicker mx_LocationPicker_hasError"},u.a.createElement(S.a,{error:this.state.error,onFinished:this.props.onFinished})):u.a.createElement("div",{className:"mx_LocationPicker"},u.a.createElement("div",{id:"mx_LocationPicker_map"}),this.props.shareType===G.Pin&&u.a.createElement("div",{className:"mx_LocationPicker_pinText"},u.a.createElement("span",null,this.state.position?Object(h.a)("Click to move the pin"):Object(h.a)("Click to drop a pin"))),u.a.createElement("div",{className:"mx_LocationPicker_footer"},u.a.createElement("form",{onSubmit:this.onOk},this.props.shareType===G.Live&&u.a.createElement(I,{onChange:this.onTimeoutChange,timeout:this.state.timeout}),u.a.createElement(N.a,{"data-test-id":"location-picker-submit-button",type:"submit",element:"button",kind:"primary",className:"mx_LocationPicker_submitButton",disabled:!this.state.position,onClick:this.onOk},Object(h.a)("Share location")))),u.a.createElement("div",{id:this.getMarkerId()},!!this.marker&&u.a.createElement(W.a,{roomMember:V(this.props.shareType)?this.props.sender:void 0,useMemberColor:this.props.shareType===G.Live})))}}o()(q,"contextType",_.a);var z=q;function $(e){const t=x.b.get().brand;switch(e){case 1:return Object(h.a)("%(brand)s was denied permission to fetch your location. Please allow location access in your browser settings.",{brand:t});case 2:return Object(h.a)("Failed to fetch your location. Please try again later.");case 3:return Object(h.a)("Timed out trying to fetch your location. Please try again later.");case 4:return Object(h.a)("Unknown error fetching location. Please try again later.")}}var Y,J=a(98);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Q.apply(this,arguments)}function Z(e){return m.createElement("svg",Q({fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8 14",role:"presentation","aria-hidden":!0},e),Y||(Y=m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.637.707c.39.39.391 1.025.002 1.417L2.705 7.089l4.95 4.95c.39.39.392 1.025.002 1.417a.996.996 0 01-1.412.002L.59 7.8a1.004 1.004 0 01-.003-1.416L6.225.709A.996.996 0 017.637.707z",fill:"currentColor"})))}var X=a(436);var ee=e=>{let{onBack:t,onCancel:a,displayBack:n}=e;return u.a.createElement("div",{className:"mx_ShareDialogButtons"},n&&u.a.createElement(N.a,{className:"mx_ShareDialogButtons_button left","data-test-id":"share-dialog-buttons-back",onClick:t,element:"button"},u.a.createElement(Z,{className:"mx_ShareDialogButtons_button-icon"})),u.a.createElement(N.a,{className:"mx_ShareDialogButtons_button right","data-test-id":"share-dialog-buttons-cancel",onClick:a,element:"button"},u.a.createElement(X.a,{className:"mx_ShareDialogButtons_button-icon"})))},te=a(106),ae=a.n(te),ne=a(225),oe=a(164),ie=a(149),re=a(588),se=a(318);const le=["onClick","label","shareType"],ce=()=>{const e=Object(m.useContext)(_.a).getUserId(),t=ne.a.instance.displayName,a=ne.a.instance.getHttpAvatarUrl(36);return u.a.createElement("div",{className:`mx_ShareType_option-icon ${G.Own}`},u.a.createElement(oe.a,{idName:e,name:t,url:a,width:36,height:36,resizeMethod:"crop",className:"mx_UserMenu_userAvatar_BaseAvatar"}))},me=e=>{let{onClick:t,label:a,shareType:n}=e,o=ae()(e,le);return u.a.createElement(N.a,r()({element:"button",className:"mx_ShareType_option",onClick:t},o),n===G.Own&&u.a.createElement(ce,null),n===G.Pin&&u.a.createElement(re.a,{className:`mx_ShareType_option-icon ${G.Pin}`}),n===G.Live&&u.a.createElement(se.a,{className:`mx_ShareType_option-icon ${G.Live}`}),a)};var ue=e=>{let{setShareType:t,enabledShareTypes:a}=e;const n={[G.Own]:Object(h.a)("My current location"),[G.Live]:Object(h.a)("My live location"),[G.Pin]:Object(h.a)("Drop a Pin")};return u.a.createElement("div",{className:"mx_ShareType"},u.a.createElement(re.a,{className:"mx_ShareType_badge"}),u.a.createElement(ie.a,{className:"mx_ShareType_heading",size:"h3"},Object(h.a)("What location type do you want to share?")),u.a.createElement("div",{className:"mx_ShareType_wrapper_options"},a.map((e=>u.a.createElement(me,{key:e,onClick:()=>t(e),label:n[e],shareType:e,"data-test-id":`share-location-option-${e}`})))))},de=a(209);const he=e=>{let{onSubmit:t}=e;const[a,n]=Object(m.useState)(!1);return u.a.createElement("div",{"data-test-id":"location-picker-enable-live-share",className:"mx_EnableLiveShare"},u.a.createElement(se.a,{className:"mx_EnableLiveShare_icon"}),u.a.createElement(ie.a,{className:"mx_EnableLiveShare_heading",size:"h3"},Object(h.a)("Live location sharing")),u.a.createElement("p",{className:"mx_EnableLiveShare_description"},Object(h.a)("Please note: this is a labs feature using a temporary implementation. This means you will not be able to delete your location history, and advanced users will be able to see your location history even after you stop sharing your live location with this room.")),u.a.createElement(de.a,{"data-test-id":"enable-live-share-toggle",value:a,onChange:n,label:Object(h.a)("Enable live location sharing")}),u.a.createElement(N.a,{"data-test-id":"enable-live-share-submit",className:"mx_EnableLiveShare_button",element:"button",kind:"primary",onClick:t,disabled:!a},Object(h.a)("OK")))};var pe=a(141),be=a(109);var ge=e=>{let{menuPosition:t,onFinished:a,sender:n,roomId:o,openMenu:i,relation:s}=e;const l=Object(m.useContext)(_.a),c=(e=>{const t=[G.Own];return e||t.push(G.Live),t.push(G.Pin),t})(s),p=Object(pe.a)("feature_location_share_live"),b=c.length>1,[g,v]=Object(m.useState)(b?void 0:G.Own),C=ne.a.instance.displayName,E=g===G.Live?((e,t,a,n)=>async e=>{let{timeout:o}=e;const i=Object(h.a)("%(displayName)s's live location",{displayName:a});try{await A.a.instance.createLiveBeacon(t,Object(R.makeBeaconInfoContent)(null!=o?o:3e5,!0,i,D.a.Self))}catch(e){H(e,n,G.Live)}})(0,o,C,i):((e,t,a,n,o)=>async i=>{let{uri:r,timestamp:s}=i;if(r)try{const o=(null==n?void 0:n.rel_type)===d.d.name?n.event_id:null,i=a===G.Pin?D.a.Pin:D.a.Self,l=Object(R.makeLocationContent)(void 0,r,s,void 0,i);await Object(K.a)(t,(t=>e.sendMessage(t,o,l)),e)}catch(e){H(e,o,a)}})(l,o,g,s,i),k=g===G.Live&&!p;return u.a.createElement(y.n,r()({},t,{onFinished:a,managed:!1}),u.a.createElement("div",{className:"mx_LocationShareMenu"},k&&u.a.createElement(he,{onSubmit:()=>{J.b.setValue("feature_location_share_live",void 0,be.a.DEVICE,!0)}}),!k&&!!g&&u.a.createElement(z,{sender:n,shareType:g,onChoose:E,onFinished:a}),!g&&u.a.createElement(ue,{setShareType:v,enabledShareTypes:c}),u.a.createElement(ee,{displayBack:!!g&&b,onBack:()=>v(void 0),onCancel:a})))};var ve=e=>{let{roomId:t,sender:a,menuPosition:n,relation:o}=e;const i=Object(m.useContext)(je),[r,s,c,d]=Object(y.q)(),p=e=>{d(e),null==i||i()};let g;if(r){const e=null!=n?n:Object(y.i)(s.current.getBoundingClientRect());g=u.a.createElement(ge,{menuPosition:e,onFinished:p,sender:a,roomId:t,openMenu:c,relation:o})}const v=l()("mx_MessageComposer_button",{mx_MessageComposer_button_highlight:r});return u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{className:v,iconClassName:"mx_MessageComposer_location",onClick:c,title:Object(h.a)("Location"),inputRef:s}),g)},ye=a(741),_e=a(95),Ce=a(260),Ee=a(112),ke=a(211),fe=a(271),Oe=a(146),xe=a(895);const je=Object(m.createContext)(null);function Me(e){return u.a.createElement(xe.a,{key:"emoji_button",addEmoji:e.addEmoji,menuPosition:e.menuPosition,className:"mx_MessageComposer_button"})}function we(){return u.a.createElement(Le,{key:"controls_upload"})}const Ne=Object(m.createContext)(null),Se=e=>{let{roomId:t,relation:a,children:n}=e;const o=Object(m.useContext)(_.a),i=Object(m.useContext)(Ee.b),r=Object(m.useRef)(),s=()=>{var e;o.isGuest()?g.a.dispatch({action:"require_registration"}):null===(e=r.current)||void 0===e||e.click()};Object(ke.a)(g.a,(e=>{i.timelineRenderingType===e.context&&"upload_file"===e.action&&s()}));return u.a.createElement(Ne.Provider,{value:s},n,u.a.createElement("input",{ref:r,type:"file",style:{display:"none"},multiple:!0,onClick:fe.a,onChange:e=>{0!==e.target.files.length&&(Ce.a.sharedInstance().sendContentListToRoom(Array.from(e.target.files),t,a,o,i.timelineRenderingType),e.target.value="")}}))},Le=()=>{const e=Object(m.useContext)(je),t=Object(m.useContext)(Ne);return u.a.createElement(b.a,{className:"mx_MessageComposer_button",iconClassName:"mx_MessageComposer_upload",onClick:()=>{null==t||t(),null==e||e()},title:Object(h.a)("Attachment")})};function Pe(e){return e.showStickersButton?u.a.createElement(b.a,{id:"stickersButton",key:"controls_stickers",className:"mx_MessageComposer_button",iconClassName:"mx_MessageComposer_stickers",onClick:()=>e.setStickerPickerOpen(!e.isStickerPickerOpen),title:e.isStickerPickerOpen?Object(h.a)("Hide stickers"):Object(h.a)("Sticker")}):null}const Te=e=>e.showVoiceBroadcastButton?u.a.createElement(b.a,{key:"start_voice_broadcast",className:"mx_MessageComposer_button",iconClassName:"mx_MessageComposer_voiceBroadcast",onClick:e.onStartVoiceBroadcastClick,title:Object(h.a)("Voice broadcast")}):null;function Ue(e,t){return t?null:u.a.createElement(b.a,{key:"voice_message_send",className:"mx_MessageComposer_button",iconClassName:"mx_MessageComposer_voiceMessage",onClick:e.onRecordStartEndClick,title:Object(h.a)("Voice Message")})}function Be(e,t){return u.a.createElement(Ie,{key:"polls",room:e,relation:t})}class Ie extends u.a.PureComponent{constructor(){super(...arguments),o()(this,"context",void 0),o()(this,"onCreateClick",(()=>{var e;null===(e=this.context)||void 0===e||e.call(this);if(this.props.room.currentState.maySendEvent(c.M_POLL_START.name,_e.a.get().getUserId())){var t;const e=(null===(t=this.props.relation)||void 0===t?void 0:t.rel_type)===d.d.name?this.props.relation.event_id:null;O.b.createDialog(ye.a,{room:this.props.room,threadId:e},"mx_CompoundDialog",!1,!0)}else O.b.createDialog(v.a,{title:Object(h.a)("Permission Required"),description:Object(h.a)("You do not have permission to start polls in this room.")})}))}render(){var e;return(null===(e=this.props.relation)||void 0===e?void 0:e.rel_type)===d.d.name?null:u.a.createElement(b.a,{className:"mx_MessageComposer_button",iconClassName:"mx_MessageComposer_poll",onClick:this.onCreateClick,title:Object(h.a)("Poll")})}}function Re(e,t,a,n){const o=t.getMember(n.getUserId());return e.showLocationButton&&o?u.a.createElement(ve,{key:"location",roomId:a,relation:e.relation,sender:o,menuPosition:e.menuPosition}):null}function De(e){let{isRichTextEnabled:t,onClick:a}=e;const n=t?Object(h.a)("Hide formatting"):Object(h.a)("Show formatting");return u.a.createElement(b.a,{className:"mx_MessageComposer_button",iconClassName:l()({mx_MessageComposer_plain_text:!t,mx_MessageComposer_rich_text:t}),onClick:a,title:n})}o()(Ie,"contextType",je);t.b=e=>{const t=Object(m.useContext)(_.a),{room:a,roomId:n,narrow:o}=Object(m.useContext)(Ee.b),i=Object(pe.b)("feature_wysiwyg_composer");if(e.haveRecording)return null;let s,c;o?(s=[i?u.a.createElement(De,{key:"composerModeButton",isRichTextEnabled:e.isRichTextEnabled,onClick:e.onComposerModeClick}):Me(e)],c=[we(),Pe(e),Ue(e,o),Te(e),e.showPollsButton?Be(a,e.relation):null,Re(e,a,n,t)]):(s=[i?u.a.createElement(De,{key:"composerModeButton",isRichTextEnabled:e.isRichTextEnabled,onClick:e.onComposerModeClick}):Me(e),we()],c=[Pe(e),Ue(e,o),Te(e),e.showPollsButton?Be(a,e.relation):null,Re(e,a,n,t)]),s=s.filter((e=>e)),c=c.filter((e=>e));const d=l()({mx_MessageComposer_button:!0,mx_MessageComposer_buttonMenu:!0,mx_MessageComposer_closeButtonMenu:e.isMenuOpen});return u.a.createElement(Se,{roomId:n,relation:e.relation},s,c.length>0&&u.a.createElement(p.a,{className:d,onClick:e.toggleButtonMenu,title:Object(h.a)("More options")}),e.isMenuOpen&&u.a.createElement(Oe.e,r()({onFinished:e.toggleButtonMenu},e.menuPosition,{wrapperClassName:"mx_MessageComposer_Menu",compact:!0}),u.a.createElement(je.Provider,{value:e.toggleButtonMenu},u.a.createElement(Oe.c,null,c))))}},895:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(103),o=a.n(n),i=a(99),r=a.n(i),s=a(93),l=a.n(s),c=a(94),m=a(121),u=a(918),d=a(616),h=a(626);function p(e){let{addEmoji:t,menuPosition:a,className:n}=e;const i=Object(s.useContext)(h.a),[p,b,g,v]=Object(m.q)();let y=null;if(p&&b.current){const e=null!=a?a:Object(m.i)(b.current.getBoundingClientRect());y=l.a.createElement(m.n,o()({},e,{onFinished:()=>{v(),null==i||i()},managed:!1}),l.a.createElement(u.d,{onChoose:t,showQuickReactions:!0}))}const _=r()("mx_EmojiButton",n,{mx_EmojiButton_highlight:p});return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{className:_,iconClassName:"mx_EmojiButton_icon",onClick:g,title:Object(c.a)("Emoji"),inputRef:b}),y)}}}]);
//# sourceMappingURL=10.js.map