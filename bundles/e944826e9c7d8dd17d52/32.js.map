{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/components/EditionButtons.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useInitialContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/EditWysiwygComposer.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useWysiwygEditActionHandler.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/hooks/useEditing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/editing.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/settings/KeyboardShortcut.tsx","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/createMessageContent.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/message.ts","webpack:///./node_modules/matrix-react-sdk/src/components/views/rooms/wysiwyg_composer/utils/isContentModified.ts"],"names":["EditionButtons","onCancelClick","onSaveClick","isSaveDisabled","className","AccessibleButton","kind","onClick","_t","disabled","useInitialContent","editorStateTransfer","roomContext","useRoomContext","mxClient","useMatrixClientContext","useMemo","room","partCreator","CommandPartCreator","parts","hasEditorState","getSerializedParts","map","p","deserializePart","getEvent","getContent","format","formatted_body","replace","getFormattedContent","parseEvent","shouldEscape","SettingsStore","getValue","reduce","content","part","text","parseEditorStateTransfer","Content","forwardRef","composerFunctions","composerElement","composerContext","useComposerContext","timeoutId","useRef","handler","useCallback","payload","current","context","TimelineRenderingType","Room","action","Action","FocusEditMessageComposer","focusComposer","ComposerInsert","timelineRenderingType","composerType","ComposerType","Edit","setSelection","selection","then","insertText","useDispatcher","defaultDispatcher","useWysiwygEditActionHandler","EditWysiwygComposer","props","defaultContextValue","getDefaultContextValue","initialContent","isReady","undefined","editMessage","endEditing","onChange","setIsSaveDisabled","useState","setContent","_content","_isSaveDisabled","useEditing","ComposerContext","Provider","value","WysiwygComposer","classNames","onSend","ref","dis","dispatch","EditEvent","event","FocusSendMessageComposer","cancelPreviousPendingEdit","previousEdit","replacingEvent","status","EventStatus","QUEUED","NOT_SENT","cancelPendingEvent","KeyboardKey","name","last","icon","KEY_ICON","alternateName","ALTERNATE_KEY_NAME","Fragment","KeyboardShortcut","modifiersElement","ctrlOrCmdKey","push","key","IS_MAC","Key","META","CONTROL","ctrlKey","metaKey","altKey","ALT","shiftKey","SHIFT","async","createMessageContent","message","isHTML","relation","replyToEvent","permalinkCreator","includeReplyLegacyFallback","editedEvent","isEditing","Boolean","isReply","replyEventId","isReplyAndEditing","body","richToPlain","bodyPrefix","mxEvent","lines","split","l","trim","length","startsWith","getTextReplyFallback","formattedBodyPrefix","html","mxReply","DOMParser","parseFromString","querySelector","outerHTML","getHtmlReplyFallback","msgtype","MsgType","Text","isMarkdownEnabled","formattedBody","plainToRich","attachRelation","rel_type","event_id","getId","addReplyToMessageContent","includeLegacyFallback","sendMessage","params","roomId","posthogEvent","eventName","inThread","THREAD_RELATION_TYPE","PosthogAnalytics","instance","trackEvent","decorateStartSendingTime","threadId","prom","doMaybeLocalRoomAction","actualRoomId","CHAT_EFFECTS","forEach","effect","containsEmoji","emojis","isNotThread","command","resp","sendRoundTripMetric","getThread","editContent","newContent","createRedactEventDialog","onCloseDialog","response","getRoomId","oldContent","isContentModified","threadRootId"],"mappings":"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","file":"bundles/e944826e9c7d8dd17d52/32.js","sourceRoot":""}